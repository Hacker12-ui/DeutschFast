<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DeutschFast – Learn German A1 to B1</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <div class="page">
    <header class="header">
      <div class="logo">DeutschFast<span></span></div>
      <nav class="nav-links">
  <a href="courses.html">Courses</a>
  <a href="#">How it works</a>

  <a href="login.html" class="when-logged-out">Login</a>
  <a href="signup.html" class="btn btn-primary when-logged-out">Get started</a>

  <a href="dashboard.html" class="when-logged-in" style="display:none;">Dashboard</a>
  <a href="#" id="logout-btn" class="nav-link logout-link when-logged-in" style="display:none;">Log out</a>
  <span id="user-email" class="when-logged-in" style="display:none; margin-left: 10px; font-size: 0.9rem; color: #666;"></span>
</nav>
    </header>

    <section class="hero">
      <div>
        <h1 class="hero-title">
          Learn German from A1 to B1<br />
          with short, focused lessons.
        </h1>
        <p class="hero-sub">
          Four skills. Smart vocab review. Simple daily practice.
        </p>
        <div class="hero-buttons">
          <a href="signup.html" class="btn btn-primary">Start placement test</a>
          <a href="signup.html" class="btn btn-outline">Start from A1</a>
        </div>
      </div>
      <div class="hero-illu">
        <div class="illu-header">
          <div class="illu-pill"></div>
          <div class="illu-avatar"></div>
        </div>
        <div class="illu-row accent"></div>
        <div class="illu-row wide"></div>
        <div class="illu-row mid"></div>
        <div class="illu-row short"></div>
        <div class="illu-audio">
          <div class="illu-audio-icon"></div>
          <div class="illu-audio-bar"></div>
        </div>
      </div>
    </section>

    <section class="section">
      <h2 class="section-title">Why this platform?</h2>
      <div class="card-row">
        <div class="card">
          <div class="card-icon">⏱</div>
          <div class="card-title">Short, clear lessons</div>
          <p class="card-text">
            Focused units for Listening, Reading, Speaking, and Writing.
          </p>
        </div>
        <div class="card">
          <div class="card-icon">✓</div>
          <div class="card-title">Smart vocabulary practice</div>
          <p class="card-text">
            Spaced repetition so you don’t forget important words.
          </p>
        </div>
        <div class="card">
          <div class="card-icon">A1</div>
          <div class="card-title">Levels A1 to B1</div>
          <p class="card-text">
            Follow a structured path aligned with CEFR levels.
          </p>
        </div>
      </div>
    </section>

    <section class="section">
      <h2 class="section-title">How it works</h2>
      <div class="steps-row">
        <div class="step-card">
          <div class="step-num">1.</div>
          <div>
            <div class="step-body-title">Take a quick placement test or start at A1.</div>
            <p class="step-body-text">Answer a few questions to find your starting level.</p>
          </div>
        </div>
        <div class="step-card">
          <div class="step-num">2.</div>
          <div>
            <div class="step-body-title">Follow short daily lessons combining all four skills.</div>
            <p class="step-body-text">Learn with listening, reading, speaking, and writing in each unit.</p>
          </div>
        </div>
        <div class="step-card">
          <div class="step-num">3.</div>
          <div>
            <div class="step-body-title">Review vocab and track your progress over time.</div>
            <p class="step-body-text">Smart review keeps words fresh while you see your progress grow.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="section cta-section">
      <p class="tagline">Built for students and professionals who want a clear, simple way to learn German.</p>
      <div class="cta-inner">
        <span>Ready to start?</span>
        <button class="btn btn-primary">Get started for free</button>
      </div>
    </section>

    <footer class="footer">
      <div>DeutschFast</div>
      <div class="footer-links">
        <a href="#">Contact</a>
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of Use</a>
      </div>
    </footer>
  </div>

  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyD3siGsp0yRzdypymFTUWKLbMDQMJ7VBds",
    authDomain: "deutschfast-prod.firebaseapp.com",
    projectId: "deutschfast-prod",
    storageBucket: "deutschfast-prod.firebasestorage.app",
    messagingSenderId: "505440472870",
    appId: "1:505440472870:web:e438916302530e2d5f3be7"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const loggedOutElements = document.querySelectorAll('.when-logged-out');
  const loggedInElements = document.querySelectorAll('.when-logged-in');
  const userEmailSpan = document.getElementById('user-email');
  const logoutBtn = document.getElementById('logout-btn');

  /**
   * UI Toggle & Session Management
   * This logic ensures that if a session exists, we show the Dashboard link
   * and hide the Login/Signup buttons immediately.
   */
  onAuthStateChanged(auth, (user) => {
    if (user) {
      // User is logged in: update UI state
      loggedOutElements.forEach(el => el.style.display = 'none');
      loggedInElements.forEach(el => el.style.display = 'inline-block');
      
      if (userEmailSpan) {
    userEmailSpan.textContent = "Go to Dashboard"; // Changed from user.email
    // Optional: Make it clickable to go to dashboard if it isn't already
    userEmailSpan.parentElement.href = "dashboard.html"; 
}
    } else {
      // User is logged out: update UI state
      loggedOutElements.forEach(el => el.style.display = 'inline-block');
      loggedInElements.forEach(el => el.style.display = 'none');
    }
  });

  // Logout functionality with explicit redirect to prevent loops
  if (logoutBtn) {
    logoutBtn.addEventListener('click', async (e) => {
      e.preventDefault();
      try {
        await signOut(auth); //
        // Instead of reload, redirect to home to clear all auth states
        window.location.replace("index.html"); 
      } catch (error) {
        console.error("Error signing out:", error);
      }
    });
  }
</script>
</body>
</html>